<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äº’å‹•å¼é‡‘é–€è¡Œç¨‹è¦åŠƒå·¥å…· (å„€è¡¨æ¿ç‰ˆ)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #FDFBF5; -webkit-tap-highlight-color: transparent; }
        .tab-active { background-color: #A0522D; color: #FFFFFF; }
        .tab-inactive { background-color: #EFEBE5; color: #A0522D; }
        .day-btn-active { background-color: #8B4513; color: #FFFFFF; transform: scale(1.05); }
        .day-btn-inactive { background-color: #D2B48C; color: #6B4226; }
        .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out; }
        .section-fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .chart-container { position: relative; width: 100%; max-width: 800px; margin-left: auto; margin-right: auto; height: 350px; max-height: 45vh; }
        @media (min-width: 768px) { .chart-container { height: 400px; max-height: none; } }
    </style>
</head>
<body class="text-gray-800">

    <div id="app" class="container mx-auto p-4 sm:p-6 max-w-7xl">

        <header class="text-center mb-6 md:mb-8">
            <h1 class="text-3xl sm:text-4xl md:text-5xl font-bold text-[#8B4513]">é‡‘é–€æ·±åº¦æ¼«éŠ</h1>
            <p class="text-base md:text-lg text-gray-600 mt-2">æ‚¨çš„äº’å‹•å¼å››æ—¥è¡Œç¨‹è¦åŠƒå„€è¡¨æ¿</p>
        </header>

        <nav id="main-nav" class="sticky top-0 z-10 bg-[#FDFBF5] py-3 mb-6 md:mb-8 shadow-md rounded-lg">
            <div class="flex flex-wrap justify-center gap-2 md:gap-3">
                <button data-tab="itinerary" class="nav-tab tab-active px-3 py-2 rounded-lg font-semibold transition-colors duration-300 text-xs sm:text-sm">ğŸ“… è¡Œç¨‹ç¸½è¦½</button>
                <button data-tab="detailed" class="nav-tab tab-inactive px-3 py-2 rounded-lg font-semibold transition-colors duration-300 text-xs sm:text-sm">ğŸ“œ è©³ç´°è¡Œç¨‹</button>
                <button data-tab="prep" class="nav-tab tab-inactive px-3 py-2 rounded-lg font-semibold transition-colors duration-300 text-xs sm:text-sm">ğŸ“‹ è¡Œå‰æº–å‚™</button>
                <button data-tab="food" class="nav-tab tab-inactive px-3 py-2 rounded-lg font-semibold transition-colors duration-300 text-xs sm:text-sm">ğŸœ ç¾é£Ÿåœ°åœ–</button>
                <button data-tab="budget" class="nav-tab tab-inactive px-3 py-2 rounded-lg font-semibold transition-colors duration-300 text-xs sm:text-sm">ğŸ’° é ç®—è¦åŠƒ</button>
            </div>
        </nav>

        <main>
            <!-- Itinerary Section -->
            <section id="itinerary-section" class="tab-content">
                <div class="bg-white p-4 md:p-6 rounded-xl shadow-lg">
                    <h2 class="text-2xl md:text-3xl font-bold text-[#8B4513] mb-4">è¡Œç¨‹ç¸½è¦½</h2>
                    <p class="text-gray-600 mb-6 text-sm md:text-base">æ­¡è¿ä¾†åˆ°æ‚¨çš„é‡‘é–€è¡Œç¨‹æ ¸å¿ƒã€‚é»æ“Šä¸‹æ–¹çš„æ—¥æœŸæŒ‰éˆ•ï¼Œå³å¯æ¢ç´¢æ¯æ—¥çš„è©³ç´°è¦åŠƒã€‚å¦‚éœ€å®Œæ•´äº¤é€šèˆ‡è²»ç”¨ç´°ç¯€ï¼Œè«‹åˆ‡æ›è‡³ã€Œè©³ç´°è¡Œç¨‹ã€åˆ†é ã€‚</p>
                    <div id="day-selector" class="grid grid-cols-2 md:grid-cols-4 gap-2 md:gap-4 mb-6"></div>
                    <div id="itinerary-details" class="section-fade-in"></div>
                </div>
            </section>

            <!-- Detailed Itinerary Section -->
            <section id="detailed-section" class="tab-content hidden">
                <div class="bg-white p-4 md:p-6 rounded-xl shadow-lg">
                    <h2 class="text-2xl md:text-3xl font-bold text-[#8B4513] mb-4">è©³ç´°è¡Œç¨‹ç¸½è¦½</h2>
                    <p class="text-gray-600 mb-6 text-sm md:text-base">æ­¤è™•ç‚ºæ‚¨æä¾›æœ€å®Œæ•´çš„è¡Œç¨‹è¦åŠƒï¼ŒåŒ…å«æ¯ä¸€ç«™çš„å»ºè­°æ™‚é–“ã€äº¤é€šæ–¹å¼ã€é–€ç¥¨è²»ç”¨åŠé è¨ˆåœç•™æ™‚é–“ã€‚æ‚¨å¯ä»¥å°‡æ­¤ä½œç‚ºæ—…é€”ä¸­çš„ä¸»è¦è¡Œå‹•æŒ‡å—ã€‚</p>
                    <div id="detailed-itinerary-content" class="space-y-8"></div>
                </div>
            </section>

            <!-- Prep Section -->
            <section id="prep-section" class="tab-content hidden">
                 <div class="bg-white p-4 md:p-6 rounded-xl shadow-lg">
                    <h2 class="text-2xl md:text-3xl font-bold text-[#8B4513] mb-4">è¡Œå‰æº–å‚™</h2>
                    <p class="text-gray-600 mb-6 text-sm md:text-base">æˆåŠŸçš„æ—…ç¨‹å§‹äºå……åˆ†çš„æº–å‚™ã€‚é»æ“Šå„å€‹é …ç›®ä»¥å±•é–‹è©³ç´°å…§å®¹ï¼Œè®“æ‚¨åœ¨å‡ºç™¼å‰å°±æˆç‚ºä¸€ä½é‡‘é–€é”äººã€‚</p>
                    <div id="prep-accordion" class="space-y-4"></div>
                </div>
            </section>

            <!-- Food Section -->
            <section id="food-section" class="tab-content hidden">
                <div class="bg-white p-4 md:p-6 rounded-xl shadow-lg">
                    <h2 class="text-2xl md:text-3xl font-bold text-[#8B4513] mb-4">ç¾é£Ÿåœ°åœ–</h2>
                    <p class="text-gray-600 mb-6 text-sm md:text-base">é‡‘é–€æ˜¯ç¾é£Ÿçš„å¯¶åº«ã€‚é€™è£¡æˆ‘å€‘ç‚ºæ‚¨æ•´ç†äº†è¡Œç¨‹å ±å‘Šä¸­æåŠçš„æ‰€æœ‰æ¨è–¦é¤å»³èˆ‡ç¾é£Ÿï¼Œæ‚¨å¯ä»¥ä¾æ“šæ­¤æ¸…å–®ï¼Œè¦åŠƒæ‚¨çš„ç¾é£Ÿæ¢ç´¢ä¹‹æ—…ã€‚</p>
                    <div id="food-table" class="overflow-x-auto"></div>
                </div>
            </section>

            <!-- Budget Section -->
            <section id="budget-section" class="tab-content hidden">
                <div class="bg-white p-4 md:p-6 rounded-xl shadow-lg">
                    <h2 class="text-2xl md:text-3xl font-bold text-[#8B4513] mb-4">é ç®—è¦åŠƒå·¥å…·</h2>
                    <p class="text-gray-600 mb-6 text-sm md:text-base">é€™å€‹äº’å‹•å·¥å…·èƒ½å°‡æ‚¨çš„æ—…è¡Œè¨ˆç•«è½‰åŒ–ç‚ºæ¸…æ™°çš„é ç®—ã€‚è«‹åœ¨ä¸‹æ–¹å‹¾é¸æ‚¨è¨ˆç•«åƒèˆ‡çš„æ´»å‹•èˆ‡æƒ³å“åšçš„ç¾é£Ÿã€‚ç³»çµ±å°‡å³æ™‚ç‚ºæ‚¨è¨ˆç®—ç¸½èŠ±è²»ã€‚</p>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div id="budget-items" class="max-h-[50vh] lg:max-h-[500px] overflow-y-auto pr-4"></div>
                        <div class="flex flex-col items-center">
                            <div class="text-center mb-4">
                                <h3 class="text-xl font-semibold">é ä¼°ç¸½èŠ±è²»</h3>
                                <p class="text-4xl font-bold text-green-600">NT$ <span id="total-budget">0</span></p>
                            </div>
                            <div class="chart-container">
                                <canvas id="budgetChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

    </div>

    <script>
    // =================== è¡Œç¨‹è³‡æ–™å·²æ›´æ–° ===================
    const AppData = {
        itinerary: [
            { day: 1, theme: "æ­·å²å·¡ç¦®ï¼šå¤åŸèˆ‡æˆ°åœ°é¢¨å…‰", schedule: [
                { time: "", icon: "ğŸ˜ï¸", title: "æ¨¡ç¯„è¡—", details: "èåˆä¸­æ—¥é¢¨æ ¼çš„ç´…ç£šæ‹±å»Šè¡—é“ï¼Œç‚ºé‡‘é–€æœ€å…·ç‰¹è‰²çš„è€è¡—ä¹‹ä¸€ã€‚", transport: "æ­¥è¡Œ", cost: 0, duration: "", link: "https://maps.app.goo.gl/uJp43FN4mD9fBvD77" },
                { time: "", icon: "ğŸ“œ", title: "é‚±è‰¯åŠŸæ¯ç¯€å­åŠ", details: "åœ‹å®šå¤è¹Ÿï¼Œç‚ºè¡¨æšæ¸…ä»£æç£é‚±è‰¯åŠŸä¹‹æ¯ç¯€å­äº‹è¹Ÿè€Œå»ºï¼Œç‰ŒåŠé›•å·¥ç²¾ç´°ã€‚", transport: "æ­¥è¡Œ", cost: 0, duration: "", link: "https://maps.app.goo.gl/9Q5B4aGfMhG3vE7z5" },
                { time: "", icon: "ğŸ›ï¸", title: "æ¸…é‡‘é–€é®ç¸½å…µç½²", details: "æ¸…ä»£çš„è»äº‹æŒ‡æ®ä¸­å¿ƒï¼Œç¾ç‚ºå¤è¹Ÿåšç‰©é¤¨ï¼Œå¯äº†è§£é‡‘é–€çš„æ­·å²ã€‚", transport: "æ­¥è¡Œ", cost: 0, duration: "", link: "https://maps.app.goo.gl/f8nK9d9cZ9Y8XvYEA" },
                { time: "", icon: "ğŸ“–", title: "æµ¯æ±Ÿæ›¸é™¢", details: "é‡‘é–€æœ€æ—©çš„æ›¸é™¢ï¼Œæœ±ç†¹æ›¾åœ¨æ­¤è¬›å­¸ï¼Œå……æ»¿æ–‡æ•™æ°£æ¯ã€‚", transport: "æ­¥è¡Œ", cost: 0, duration: "", link: "https://maps.app.goo.gl/WbF8c1kZ3H4J6jY27" },
                { time: "", icon: "ğŸŒ‡", title: "è’å…‰æ¨“", details: "é‡‘é–€çš„æ¨™èªŒæ€§å»ºç¯‰ï¼Œå¯ç™»æ¨“é çœºé‡‘åŸå¸‚å€èˆ‡å»ˆé–€ã€‚", transport: "è‡ªé§•", cost: 0, duration: "", link: "https://maps.app.goo.gl/4YgX9gM8Z7H6J9Xj9" },
                { time: "", icon: "ğŸŒŠ", title: "å»ºåŠŸå¶¼", details: "éœ€è¦–æ½®æ±æ™‚é–“å‰å¾€çš„è¿·ä½ é›¢å³¶ï¼Œå³¶ä¸Šæœ‰å·¨å¤§çš„ç‰¡è £äººè£ç½®è—è¡“ã€‚", transport: "è‡ªé§•", cost: 0, duration: "", link: "https://maps.app.goo.gl/wKxJ8fN7pY6Z5Rk26" },
                { time: "", icon: "ğŸ ", title: "ç“Šæ—èšè½", details: "é‡‘é–€è¦æ¨¡æœ€å¤§çš„å¤åèšè½ï¼Œä»¥è”¡æ°å®—ç¥ èˆ‡è¯éº—çš„æ°‘é˜²å‘é“èåã€‚", transport: "è‡ªé§•", cost: 0, duration: "", link: "https://maps.app.goo.gl/yQ7xZ6tV5S9R8fFk7" },
                { time: "", icon: "ğŸ°", title: "é™³æ™¯è˜­æ´‹æ¨“", details: "é‡‘é–€è¦æ¨¡æœ€å¤§çš„æ´‹æ¨“ï¼Œç´”ç™½è‰²çš„å¤–è§€æ¥µå…·ç‰¹è‰²ï¼Œæ˜¯ç†±é–€çš„æ‰“å¡æ™¯é»ã€‚", transport: "è‡ªé§•", cost: 0, duration: "", link: "https://maps.app.goo.gl/UiZefLaFUuH3cSERA" },
                { time: "", icon: "â›°ï¸", title: "æˆåŠŸå‘é“", details: "ä¸€åº§èŠ±å´—å²©å‘é“ï¼Œé€£æ¥è‘—æ´‹æ¨“èˆ‡æµ·ç˜ï¼Œå…¼å…·è»äº‹èˆ‡æ°‘é˜²åŠŸèƒ½ã€‚", transport: "æ­¥è¡Œ", cost: 0, duration: "", link: "https://maps.app.goo.gl/YkR8zH9tX6J7vK5d9" },
                { time: "", icon: "ğŸï¸", title: "å¤ªæ¹–", details: "é‡‘é–€æœ€å¤§çš„äººå·¥æ·¡æ°´æ¹–ï¼Œæ¹–ç•”æ™¯è‰²å„ªç¾ï¼Œé©åˆæ•£æ­¥ä¼‘æ†©ã€‚", transport: "è‡ªé§•", cost: 0, duration: "", link: "https://maps.app.goo.gl/p3hD2MEWcwGP8vyk6" }
            ]},
            { day: 2, theme: "çƒˆå¶¼æ¢ç§˜ï¼šå‰é€²å°é‡‘é–€", schedule: [
                { time: "ä¸­åˆ", icon: "ğŸš¢", title: "æ°´é ­ç¢¼é ­", details: "å¾å¤§é‡‘é–€çš„æ°´é ­ç¢¼é ­æ­ä¹˜æ¸¡è¼ªå‰å¾€å°é‡‘é–€çš„ä¹å®®ç¢¼é ­ã€‚", transport: "æ¸¡è¼ª", cost: 60, duration: "", link: "https://maps.app.goo.gl/hGkP9sY8Z6J5Rk26" },
                { time: "12:00-18:00", icon: "â›°ï¸", title: "ä¹å®®å‘é“", details: "å°é‡‘é–€æœ€è‘—åçš„æˆ°å‚™å‘é“ï¼Œè¦æ¨¡å®å¤§ï¼Œå¯æ„Ÿå—æˆ°æ™‚çš„ç·Šå¼µæ°›åœã€‚", transport: "æ©Ÿè»Š/é›»ç“¶è»Š", cost: 0, duration: "", link: "https://maps.app.goo.gl/fN7o8P9tX6J7vK5d9" },
                { time: "12:00-18:00", icon: "ğŸ›¡ï¸", title: "å‹‡å£«å ¡èˆ‡éµæ¼¢å ¡", details: "å…©åº§ç›¸é€£çš„ç¢‰å ¡ï¼Œæœ‰åœ°ä¸‹å‘é“ç›¸é€šï¼Œå±•ç¤ºäº†åœ°é›·ä¸»é¡Œã€‚", transport: "æ©Ÿè»Š/é›»ç“¶è»Š", cost: 0, duration: "", link: "https://maps.app.goo.gl/xKxJ8fN7pY6Z5Rk26" },
                { time: "12:00-18:00", icon: "ğŸš©", title: "æ¹–äº•é ­æˆ°å²é¤¨", details: "ç´€éŒ„äº†å…«äºŒä¸‰ç ²æˆ°ç­‰æ­·å²ï¼Œé¤¨å…§æœ‰æœ›é é¡å¯ä»¥çœºæœ›å°å²¸ã€‚", transport: "æ©Ÿè»Š/é›»ç“¶è»Š", cost: 0, duration: "", link: "https://maps.app.goo.gl/zQ7xZ6tV5S9R8fFk7" },
                { time: "12:00-18:00", icon: "ğŸ–ï¸", title: "é›™å£æµ·æ¿±å…¬åœ’", details: "è·é›¢å»ˆé–€æœ€è¿‘çš„æµ·ç˜ï¼Œå¯è¦‹ã€Œè»Œæ¢ç ¦ã€ï¼Œæ˜¯è§€è³å¤•é™½èˆ‡å¤œæ™¯çš„å¥½åœ°æ–¹ã€‚", transport: "æ©Ÿè»Š/é›»ç“¶è»Š", cost: 0, duration: "", link: "https://maps.app.goo.gl/wKxJ8fN7pY6Z5Rk26" },
                { time: "12:00-18:00", icon: "ğŸŒ…", title: "æ²™æºªå ¡", details: "å°é‡‘é–€æœ€è¥¿æ–¹çš„æ“šé»ï¼Œæ“æœ‰çµ•ä½³çš„è§€æµ·è¦–é‡ï¼Œä¹Ÿæ˜¯çœ‹å¤•é™½çš„ç§˜å¢ƒã€‚", transport: "æ©Ÿè»Š/é›»ç“¶è»Š", cost: 0, duration: "", link: "https://maps.app.goo.gl/uJp43FN4mD9fBvD77" },
                { time: "å‚æ™š", icon: "ğŸš¢", title: "è¿”å›å¤§é‡‘é–€ (ä¹å®®ç¢¼é ­)", details: "å¾å°é‡‘é–€çš„ä¹å®®ç¢¼é ­æ­ä¹˜æ¸¡è¼ªè¿”å›å¤§é‡‘é–€çš„æ°´é ­ç¢¼é ­ã€‚", transport: "æ¸¡è¼ª", cost: 60, duration: "", link: "https://maps.app.goo.gl/fN7o8P9tX6J7vK5d9" }
            ]},
            { day: 3, theme: "æ±åŠå³¶å·¡éŠï¼šç ²é™£åœ°èˆ‡æ–‡åŒ–å°‹è¨ª", schedule: [
                { time: "", icon: "ğŸœï¸", title: "æ²™ç¾æ‘©æ´›å“¥ (æ²™ç¾è€è¡—)", details: "é ¹å»¢é¢¨æ ¼çš„åœŸé»ƒè‰²å»ºç¯‰ç¾¤ï¼Œæœ‰ã€Œå°ç‰ˆæ‘©æ´›å“¥ã€ä¹‹ç¨±ï¼Œæ˜¯ç†±é–€æ‹ç…§æ™¯é»ã€‚", transport: "è‡ªé§•", cost: 0, duration: "", link: "https://maps.app.goo.gl/rNS8T2iAF9BHemPg6" },
                { time: "", icon: "ğŸ’£", title: "ç…å±±ç ²é™£åœ°", details: "å…¨åœ‹ç½•è¦‹çš„å…¨å‘é“å¼ç ²é™£åœ°ï¼Œæœ‰ç²¾å½©çš„ç ²æ“è¡¨æ¼”ã€‚", transport: "è‡ªé§•", cost: 0, duration: "", link: "https://maps.app.goo.gl/zQ7xZ6tV5S9R8fFk7" },
                { time: "", icon: "ğŸ˜ï¸", title: "å±±åæ°‘ä¿—æ–‡åŒ–æ‘", details: "ä¿å­˜å®Œæ•´çš„é–©å—å¼å‚³çµ±å»ºç¯‰èšè½ï¼Œå…±18æ£Ÿå¤åï¼Œéå¸¸å£¯è§€ã€‚", transport: "æ­¥è¡Œ", cost: 0, duration: "", link: "https://maps.app.goo.gl/xKxJ8fN7pY6Z5Rk26" },
                { time: "", icon: "ğŸ”­", title: "é¦¬å±±è§€æ¸¬ç«™", details: "é‡‘é–€æœ¬å³¶è·é›¢ä¸­åœ‹å¤§é™¸æœ€è¿‘çš„æ“šé»ï¼Œå¯é€éæœ›é é¡è§€çœ‹å°å²¸ç”Ÿæ´»ã€‚", transport: "è‡ªé§•", cost: 0, duration: "", link: "https://maps.app.goo.gl/fN7o8P9tX6J7vK5d9" }
            ]},
            { day: 4, theme: "å‘Šåˆ¥é‡‘é–€ï¼šå›å‘³ç„¡çª®çš„æ—©é¤", schedule: [
                { time: "æ—©ä¸Š", icon: "ğŸ¥£", title: "æ°¸æ˜¥å»£æ±ç²¥", details: "å“åšé‡‘é–€é“åœ°çš„ç„¡ç±³ç²’å»£æ±ç²¥èˆ‡æ²¹æ¢ï¼Œç‚ºæ—…ç¨‹ç•«ä¸‹å®Œç¾å¥é»ã€‚", transport: "è‡ªé§•", cost: 150, duration: "", link: "https://maps.app.goo.gl/wKxJ8fN7pY6Z5Rk26" },
                { time: "", icon: "ğŸ›«", title: "æ•´ç†è¡Œå›Šï¼Œå‰å¾€æ©Ÿå ´", details: "é ç•™å……è£•æ™‚é–“å‰å¾€å°šç¾©æ©Ÿå ´ï¼Œæº–å‚™æ­æ©Ÿè¿”å®¶ã€‚", transport: "è‡ªé§•", cost: 0, duration: "", link: "https://maps.app.goo.gl/9Q5B4aGfMhG3vE7z5" }
            ]}
        ],
        prep: [
            { title: "è¡£è‘—èˆ‡æ°£å€™ï¼šå³¶å¶¼ç©¿æ­è¡“", content: "é‡‘é–€å››å­£åˆ†æ˜ï¼Œå¤å­£ç‚ç†±éœ€æ³¨æ„é˜²æ›¬ï¼›å†¬å­£é¢¨å¤§æ¿•å†·ï¼Œå‹™å¿…æ”œå¸¶é˜²é¢¨ä¿æš–è¡£ç‰©ã€‚ä¸è«–å­£ç¯€ï¼Œå»ºè­°ç©¿è‘—æ–¹ä¾¿è¡Œèµ°çš„èˆ’é©é‹å±¥ã€‚è‹¥è¦åƒè¨ªå¤ªæ­¦å±±ï¼Œé‹å‹•é‹ç‚ºä½³ã€‚" },
            { title: "äº¤é€šé ˆçŸ¥ï¼šè‡ªé§•èˆ‡åœè»Š", content: "<b>ä¸»è¦å·¥å…·ï¼š</b>ç§Ÿè³ƒæ±½è»Šæ˜¯æš¢éŠé‡‘é–€æœ€ä¾¿åˆ©çš„æ–¹å¼ã€‚å»ºè­°å‡ºç™¼å‰ç·šä¸Šé è¨‚ã€‚<br><b>åœè»Šï¼š</b>å¤šæ•¸æ™¯é»è¨­æœ‰åœè»Šå ´ï¼Œå¸‚å€è·¯é‚Šåœè»Šæ ¼ä¹Ÿç®—å……è¶³ï¼Œä½†ç†±é–€æ™‚æ®µä»éœ€è€å¿ƒå°‹æ‰¾ã€‚<br><b>é‡‘é–€å¤§æ©‹ï¼š</b>å‰å¾€çƒˆå¶¼è«‹æ³¨æ„æ©‹ä¸Šé€Ÿé™ï¼Œæœ‰å€é–“æ¸¬é€Ÿã€‚" },
            { title: "æ½®æ±èˆ‡èˆªç­ï¼šè¡Œç¨‹çš„é—œéµè®Šæ•¸", content: "<b>å»ºåŠŸå¶¼ï¼š</b>èƒ½å¦ç™»å³¶å®Œå…¨å–æ±ºæ–¼æ½®æ±ï¼Œå‡ºç™¼å‰å‹™å¿…è‡³ã€Œé‡‘é–€åœ‹å®¶å…¬åœ’ã€æˆ–ç›¸é—œç¶²ç«™æŸ¥è©¢ç•¶æ—¥ä¹¾æ½®æ™‚é–“ã€‚<br><b>èˆªç­ï¼š</b>é‡‘é–€æ°£å€™å¤šè®Šï¼Œæ˜“èµ·éœ§ï¼Œèˆªç­å¯èƒ½å—å½±éŸ¿ã€‚å»ºè­°è³¼è²·æ—…éŠä¸ä¾¿éšªï¼Œä¸¦éš¨æ™‚é—œæ³¨èˆªç­å‹•æ…‹ã€‚" },
            { title: "å¿…å‚™ç‰©å“ï¼šè®“æ—…é€”æ›´é †æš¢", content: "é™¤äº†å€‹äººè—¥å“ï¼Œå»ºè­°æ”œå¸¶é˜²èšŠæ¶²ã€é˜²æ›¬ä¹³ã€å¤ªé™½çœ¼é¡ã€å¸½å­ã€‚ç”±æ–¼è¨±å¤šç¾é£Ÿç‚ºç¾é‡‘äº¤æ˜“ï¼Œè«‹æº–å‚™è¶³å¤ ç¾é‡‘ã€‚ä¹Ÿåˆ¥å¿˜äº†è¡Œå‹•é›»æºï¼Œä»¥ç¢ºä¿æ‚¨çš„å°èˆªèˆ‡ç›¸æ©Ÿéš¨æ™‚å¾…å‘½ã€‚" }
        ],
        food: [
            { name: "é›¨å·é£Ÿå ‚", area: "é‡‘åŸé®", specialty: "å‰µæ–°æˆ°åœ°æ–™ç†", price: "NT$250-400" },
            { name: "è¯æˆå»£æ±ç²¥", area: "é‡‘åŸé®", specialty: "ç„¡ç±³ç²’ç²¥ç³œ", price: "NT$80-120" },
            { name: "é‡‘é–€ç‰›å®¶èŠ", area: "é‡‘åŸé®", specialty: "å…¨ç‰›æ–™ç†", price: "NT$500-800" },
            { name: "ä¸‰å±¤æ¨“èŠ‹é ­é¤é¤¨", area: "çƒˆå¶¼é„‰", specialty: "èŠ‹é ­å¥—é¤", price: "NT$350-500" },
            { name: "é•·æ¦®å±±è¥¿æ‹Œéºµ", area: "é‡‘æ²™é®", specialty: "ç‰¹è‰²æ‹Œéºµã€éº¥èŠ½é›", price: "NT$150-250" },
            { name: "è‰¯é‡‘ç‰§å ´", area: "é‡‘æ¹–é®", specialty: "æº«é«”é…’ç³Ÿç‰›ç«é‹", price: "NT$800-1500" },
            { name: "é«˜å‘é¤å»³", area: "é‡‘æ²™é®", specialty: "å…¨ç‰›å¤§é¤", price: "NT$500-800" },
            { name: "æ°¸æ˜¥å»£æ±ç²¥", area: "é‡‘åŸé®", specialty: "ç™¾å¹´è€åº—ç²¥ç³œ", price: "NT$80-120" }
        ],
        budgetItems: [
            { name: "ç§Ÿè»Šè²»ç”¨ (æ¯æ—¥)", category: "äº¤é€š", cost: 1500 },
            { name: "æ²¹è³‡ (4å¤©é ä¼°)", category: "äº¤é€š", cost: 800 },
            { name: "è‰¯é‡‘ç‰§å ´å…¨ç‰›å®´ (äºº)", category: "ç‰¹è‰²é«”é©—", cost: 1000 },
            { name: "è¨˜å¾·æµ·é®®é¤å»³ (äºº)", category: "ç‰¹è‰²é«”é©—", cost: 600 },
            { name: "ä¸‰å±¤æ¨“èŠ‹é ­é¤ (äºº)", category: "é¤é£²ç¾é£Ÿ", cost: 400 },
            { name: "é‡‘é–€ç‰›å®¶èŠ (äºº)", category: "é¤é£²ç¾é£Ÿ", cost: 600 },
            { name: "æ¯æ—¥å°åƒé£²å“é ç®—", category: "é¤é£²ç¾é£Ÿ", cost: 300 }
        ]
    };
    // =======================================================

    document.addEventListener('DOMContentLoaded', () => {
        const daySelector = document.getElementById('day-selector');
        const itineraryDetails = document.getElementById('itinerary-details');
        const detailedItineraryContent = document.getElementById('detailed-itinerary-content');
        const prepAccordion = document.getElementById('prep-accordion');
        const foodTableContainer = document.getElementById('food-table');
        const budgetItemsContainer = document.getElementById('budget-items');
        const totalBudgetEl = document.getElementById('total-budget');
        const navTabs = document.querySelectorAll('.nav-tab');
        const tabContents = document.querySelectorAll('.tab-content');

        let budgetChart;
        let selectedBudgetItems = [];

        function renderDaySelector() {
            daySelector.innerHTML = AppData.itinerary.map(dayData => `
                <button data-day="${dayData.day}" class="day-btn day-btn-inactive p-3 rounded-lg font-semibold transition-all duration-200 shadow-sm hover:shadow-md text-sm">ç¬¬ ${dayData.day} å¤©</button>
            `).join('');
        }

        function renderItinerary(day) {
            const dayData = AppData.itinerary.find(d => d.day == day);
            if (!dayData) return;
            itineraryDetails.innerHTML = `
                <h3 class="text-xl font-bold text-[#A0522D] mb-4">${dayData.theme}</h3>
                <div class="space-y-4">
                    ${dayData.schedule.map(item => `
                        <div class="flex items-start space-x-4 p-4 bg-amber-50 rounded-lg border-l-4 border-[#D2B48C]">
                            <div class="text-2xl">${item.icon}</div>
                            <div>
                                <p class="font-semibold">${item.time ? item.time + ' - ' : ''}${item.title}
                                    ${item.link ? `<a href="${item.link}" target="_blank" class="inline-block ml-2 text-blue-500 hover:text-blue-700" title="é–‹å•Ÿåœ°åœ–">ğŸ“</a>` : ''}
                                </p>
                                <p class="text-gray-600 text-sm">${item.details}</p>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
            itineraryDetails.classList.add('section-fade-in');
            setTimeout(() => itineraryDetails.classList.remove('section-fade-in'), 500);
        }

        function renderDetailedItinerary() {
            detailedItineraryContent.innerHTML = AppData.itinerary.map(dayData => `
                <div class="p-3 sm:p-4 rounded-lg border-2 border-amber-200">
                    <h3 class="text-lg sm:text-xl font-bold text-[#8B4513] border-b-2 border-amber-300 pb-2 mb-4">ç¬¬ ${dayData.day} å¤©: ${dayData.theme}</h3>
                    <div class="space-y-4">
                        ${dayData.schedule.map(item => `
                            <div class="flex flex-col md:flex-row md:items-start space-y-2 md:space-y-0 md:space-x-4 p-3 bg-gray-50 rounded-md">
                                <div class="flex-shrink-0 w-full md:w-32 text-base md:text-lg font-bold text-amber-800">${item.time || 'å½ˆæ€§æ™‚é–“'}</div>
                                <div class="flex-grow">
                                    <p class="font-semibold text-base sm:text-lg">${item.icon} ${item.title}
                                        ${item.link ? `<a href="${item.link}" target="_blank" class="inline-block ml-2 text-blue-500 hover:text-blue-700 text-sm align-middle">(åœ°åœ–é€£çµ)</a>` : ''}
                                    </p>
                                    <p class="text-sm text-gray-600 mt-1">${item.details}</p>
                                    <div class="flex flex-wrap gap-x-3 gap-y-2 text-xs mt-2">
                                        <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full">ğŸš— ${item.transport}</span>
                                        <span class="bg-green-100 text-green-800 px-2 py-1 rounded-full">ğŸ’° è²»ç”¨: ${item.cost > 0 ? `NT$${item.cost}` : 'å…è²»'}</span>
                                        <span class="bg-purple-100 text-purple-800 px-2 py-1 rounded-full">â³ åœç•™: ${item.duration || 'å½ˆæ€§'}</span>
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `).join('');
        }

        function renderPrep() {
            prepAccordion.innerHTML = AppData.prep.map(item => `
                <div class="border border-gray-200 rounded-lg overflow-hidden">
                    <button class="accordion-btn w-full text-left p-4 bg-amber-50 hover:bg-amber-100 flex justify-between items-center font-semibold text-[#6B4226]">
                        <span class="text-sm sm:text-base">${item.title}</span>
                        <span class="transform transition-transform duration-300">â–¼</span>
                    </button>
                    <div class="accordion-content"><div class="p-4 bg-white text-gray-700 text-sm sm:text-base">${item.content}</div></div>
                </div>
            `).join('');
        }

        function renderFoodTable() {
            foodTableContainer.innerHTML = `
                <table class="w-full text-left border-collapse text-sm">
                    <thead><tr class="bg-[#A0522D] text-white"><th class="p-2 sm:p-3">é¤å»³</th><th class="p-2 sm:p-3">å€åŸŸ</th><th class="p-2 sm:p-3">æ‹›ç‰Œ</th><th class="p-2 sm:p-3 text-right">é ä¼°åƒ¹ä½</th></tr></thead>
                    <tbody>${AppData.food.map((item, index) => `<tr class="border-b ${index % 2 === 0 ? 'bg-white' : 'bg-amber-50'}"><td class="p-2 sm:p-3 font-semibold">${item.name}</td><td class="p-2 sm:p-3">${item.area}</td><td class="p-2 sm:p-3">${item.specialty}</td><td class="p-2 sm:p-3 text-right">${item.price}</td></tr>`).join('')}</tbody>
                </table>`;
        }

        function renderBudgetItems() {
            budgetItemsContainer.innerHTML = AppData.budgetItems.map((item, index) => `
                <label class="flex items-center justify-between p-3 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors duration-200">
                    <div class="flex items-center"><input type="checkbox" data-index="${index}" class="budget-checkbox form-checkbox h-5 w-5 text-green-600 rounded"><span class="ml-3 text-gray-700 text-sm sm:text-base">${item.name} (${item.category})</span></div>
                    <span class="font-semibold text-green-700 text-sm sm:text-base">NT$${item.cost}</span>
                </label>`).join('');
        }

        function updateBudget() {
            selectedBudgetItems = Array.from(document.querySelectorAll('.budget-checkbox:checked')).map(cb => AppData.budgetItems[cb.dataset.index]);
            const total = selectedBudgetItems.reduce((sum, item) => sum + item.cost, 0);
            totalBudgetEl.textContent = total.toLocaleString();
            updateBudgetChart();
        }

        function createBudgetChart() {
            if (budgetChart) {
                budgetChart.destroy();
            }
            const ctx = document.getElementById('budgetChart').getContext('2d');
            budgetChart = new Chart(ctx, {
                type: 'bar', data: { labels: [], datasets: [{ label: 'èŠ±è²» (NT$)', data: [], backgroundColor: ['rgba(255, 99, 132, 0.5)','rgba(54, 162, 235, 0.5)','rgba(255, 206, 86, 0.5)','rgba(75, 192, 192, 0.5)'], borderWidth: 1 }] },
                options: { responsive: true, maintainAspectRatio: false, indexAxis: 'y', plugins: { legend: { display: false }, title: { display: true, text: 'é ç®—åˆ†é¡ä½”æ¯”' } }, scales: { x: { beginAtZero: true } } }
            });
        }

        function updateBudgetChart() {
            if (!budgetChart) return;
            const categoryTotals = selectedBudgetItems.reduce((acc, item) => { acc[item.category] = (acc[item.category] || 0) + item.cost; return acc; }, {});
            budgetChart.data.labels = Object.keys(categoryTotals);
            budgetChart.data.datasets[0].data = Object.values(categoryTotals);
            budgetChart.update();
        }

        daySelector.addEventListener('click', (e) => {
            if (e.target.matches('.day-btn')) {
                document.querySelectorAll('.day-btn').forEach(btn => btn.classList.replace('day-btn-active', 'day-btn-inactive'));
                e.target.classList.replace('day-btn-inactive', 'day-btn-active');
                renderItinerary(e.target.dataset.day);
            }
        });

        document.getElementById('prep-accordion').addEventListener('click', (e) => {
            const button = e.target.closest('.accordion-btn');
            if(button) {
                const content = button.nextElementSibling;
                const icon = button.querySelector('span:last-child');
                const isOpening = !content.style.maxHeight || content.style.maxHeight === '0px';
                document.querySelectorAll('.accordion-content').forEach(el => el.style.maxHeight = '0px');
                document.querySelectorAll('.accordion-btn span:last-child').forEach(el => el.style.transform = 'rotate(0deg)');
                if (isOpening) {
                    content.style.maxHeight = content.scrollHeight + "px";
                    icon.style.transform = 'rotate(180deg)';
                }
            }
        });

        document.getElementById('budget-items').addEventListener('change', updateBudget);

        navTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const target = tab.dataset.tab;
                navTabs.forEach(t => t.classList.replace('tab-active', 'tab-inactive'));
                tab.classList.replace('tab-inactive', 'tab-active');
                tabContents.forEach(content => content.classList.add('hidden'));
                const activeContent = document.getElementById(`${target}-section`);
                activeContent.classList.remove('hidden');
                activeContent.classList.add('section-fade-in');
                setTimeout(() => activeContent.classList.remove('section-fade-in'), 500);

                if(target === 'budget') {
                    if (!budgetChart) {
                        createBudgetChart();
                    }
                    updateBudget();
                }
            });
        });

        function init() {
            renderDaySelector();
            renderDetailedItinerary();
            renderPrep();
            renderFoodTable();
            renderBudgetItems();

            const firstDayBtn = document.querySelector('.day-btn[data-day="1"]');
            if (firstDayBtn) {
                 firstDayBtn.classList.replace('day-btn-inactive', 'day-btn-active');
                 renderItinerary(1);
            }
        }

        init();
    });
    </script>
</body>
</html>
